#!/usr/bin/env sh

# Mario Bros. Mushroom Powerup: 1750 523 1 392 1 523 1 659 1 784 1 1047 1 784 1 415 1 523
# 1 622 1 831 1 622 1 831 1 1046 1 1244 1 1661 1 1244 1 466 1 587 1 698 1 932 1 1195 1
# 1397 1 1865 1 1397 1

# Star Wars' Imperial Death March: 480 440 4 440 4 440 4 349 3 523 1 440 4 349 3 523 1
# 440 8 659 4 659 4 659 4 698 3 523 1 415 4 349 3 523 1 440 8

# xiè-jìléi's tune (ascending): 2000 400 4 0 1 500 4 0 1 600 4 0 1 800 6

# Adams's tune (rington-like to me): 480 220 1 277 1 330 1 440 1 185 1 220 1 277 1 370 1
# 294 1 370 1 440 1 587 1 330 1 415 1 494 1 659 1

# Close Encounters/5 Tone: 480 900 2 1000 2 800 2 400 2 600 3

# Fur Elise (note long): 480 420 1 400 1 420 1 400 1 420 1 315 1 370 1 335 1 282 3 180 1
# 215 1 282 1 315 3 213 1 262 1 315 1 335 3 213 1 420 1 400 1 420 1 400 1 420 1 315 1 370
# 1 335 1 282 3 180 1 215 1 282 1 315 3 213 1 330 1 315 1 282 3

# Totentanz: 312 262 3 247 3 262 3 220 3 247 3 196 3 220 3 220 3 262 3 262 3 294 3 262 3
# 247 3 220 3 196 3 247 3 262 3 247 5 220 1 220 5

# Oldskool Batman tune: 380 120 1 140 1 160 1 200 8 190 4

# Legend of Zelda tune: 12000 440 100 0 1 329 150 440 50 0 1 440 25 493 25 523 25 587 25
# 659 200

# Super Mario: 1000 334 1 334 1 0 1 334 1 0 1 261 1 334 1 0 1 392 2 0 4 196 2

# Super Mario Alternate: 480 165 2 165 2 165 3 554 1 587 1 554 2 370 1 554 1 523 2 349 1
# 523 1 494 3 165 2 165 2 165 2

# Mario Mushroom: 1750 523 1 392 1 523 1 659 1 784 1 1047 1 784 1 415 1 523 1 622 1 831 1
# 622 1 831 1 1046 1 1244 1 1661 1 1244 1 466 1 587 1 698 1 932 1 1175 1 1397 1 1865 1
# 1397 1

# Star Wars Imperial Death March: 480 440 4 440 4 440 4 349 3 523 1 440 4 349 3 523 1 440
# 8 659 4 659 4 659 4 698 3 523 1 415 4 349 3 523 1 440 8

# My Little Pony: 2400 587 18 554 4 587 8 659 12 587 16 0 10 587 4 659 4 740 8 587 4 784
# 12 740 8 659 8 587 4 740 20 587 40

# Wolfenstein 3D: 300 131 1 196 1 196 1 196 1 294 1 196 1 294 1 196 1 131 1

# Mall (Nothing Special): 180 440 1 554 1 659 1

# Final Countdown: 480 554 1 494 1 554 4 370 6 10 3 587 1 554 1 587 2 554 2 494 6

# Xie-Jelei's Tune: 2000 400 4 0 1 500 4 0 1 600 4 0 1 800 6

# Random tune: 480 220 1 277 1 330 1 440 1 185 1 220 1 277 1 370 1 294 1 370 1 440 1 587
# 1 330 1 415 1 494 1 659 1

# Fleetwood Mac: The Chain Bass Riff (about 5 seconds): 304 55 5 0 1 55 1 62 1 65 2 62 1
# 55 1 49 1 55 1 62 2 41 8

# Fleetwood Mac: The Chain Bass Riff Extended Version (WARNING, 25 SECONDS): 9120 55 150
# 0 30 55 30 62 30 65 60 62 30 55 30 49 30 55 30 62 60 41 360 0 120 55 150 0 30 55 30 62
# 30 65 60 62 30 55 30 49 30 55 30 62 60 41 360 0 60 41 12 42 3 43 3 44 3 45 3 46 6 47 3
# 48 3 49 6 50 3 51 3 52 6 53 3 54 3 55 150 0 30 55 30 62 30 65 60 62 30 55 30 49 30 55
# 30 62 60 41 240 82 20 0 10 82 26 0 4 82 26 0 4 82 26 0 4 82 56 0 4 82 60 55 150 0 30
# 55 30 62 30 65 60 62 30 55 30 49 30 55 30 62 60 41 360 0 120

# Example Tune: 2000 400 4 0 1 500 4 0 1 600 4 0 1 800 6

# SMB: 1000 334 1 334 1 0 1 334 1 0 1 261 1 334 1 0 1 392 2 0 4 196 2

# SMB Alternate: 480 165 2 165 2 165 3 554 1 587 1 554 2 370 1 554 1 523 2 349 1 523 1
# 494 3 165 2 165 2 165 2

# Imperial Death March: 480 440 4 440 4 440 4 349 3 523 1 440 4 349 3 523 1 440 8 659 4
# 659 4 659 4 698 3 523 1 415 4 349 3 523 1 440 8

# 4-note arpeggio of A, F#m, D, E.: 480 220 1 277 1 330 1 440 1 185 1 220 1 277 1 370 1
# 294 1 370 1 440 1 587 1 330 1 415 1 494 1 659 1

# My Attempt at a Startup Sound (vaguely similar to the Macintosh sound, but not correct):
# 1000 277 3 329 3 392 3 440 8

# Alternate: 1000 265 3 334 3 397 3 446 8

# Random: 480 494 1 523 1 587 2 494 2 523 2 440 2 494 2 392 2 440 4

# Jurassic Park (long): 240 1047 1 988 1 1047 2 784 1 698 1 0 1 1047 1 988 1 1047 2 784 1
# 698 1 0 1 1047 1 988 1 1047 2 1175 1 1175 2 1397 1 1397 2 1319 2 1319 1 1047 1 1175 2
# 988 1 784 1 0 1 1319 1 1047 1 1175 2 988 1 784 1 0 1 1568 1 1047 1 1397 2 1319 1 1319 2
# 1175 1 1175 2

# Jurassic Park: 240 1047 1 988 1 1047 2 784 1 698 1 0 1 1047 1 988 1 1047 2 784 1 698 1
# 0 1 1047 1 988 1 1047 2 1175 1 1175 2 1397 1 1397 2

# Jurassic Park (short): 240 1047 1 988 1 1047 2 784 1 698 1 0 1 1047 1 988 1 1047 2 784
# 1 698 1 0 1 1047 1 988 1 1047 2 1175 1 1175 2 1397 1 1397 2

# Jurassic Park (lower pitch): 240 523 1 494 1 523 2 392 1 349 1 0 1 523 1 494 1 523 2
# 392 1 349 1 0 1 523 1 494 1 523 2 587 1 587 2 698 1 698 2 659 2 659 1 523 1 587 2 494
# 1 392 1 0 1 659 1 523 1 587 2 494 1 392 1 0 1 784 1 523 1 698 2 659 1 659 2 587 1 587 2

if [ $# -lt 3 ]
then
    echo "Usage: $0 tempo freq dur [freq dur freq dur...]" >&2
    exit 1
fi

tempo=$1; shift

tmpdir=$(mktemp -d)

while [ -n "$*" ]; do
    freq=$1; shift
    dur=$1;  shift
    dur=$(echo "$dur*(60/$tempo)"|bc -l)
    sox \
	    -e mu-law \
	    -r 8000 \
	    -n \
	    -t raw - synth "$dur" sine "$freq" >> "$tmpdir"/grubtune.ul 2> /dev/null
done

play -q -c1 -r 8000 "$tmpdir"/grubtune.ul

rm -r "$tmpdir"
